<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Funções e dependências | Zen do R</title>
  <meta name="description" content="Um livro de programação para não-programadores" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Funções e dependências | Zen do R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://curso-r.github.io/zen-do-r/" />
  
  <meta property="og:description" content="Um livro de programação para não-programadores" />
  <meta name="github-repo" content="curso-r/zen-do-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Funções e dependências | Zen do R" />
  
  <meta name="twitter:description" content="Um livro de programação para não-programadores" />
  

<meta name="author" content="C. Lente + Curso-R" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="4-git-github.html"/>
<link rel="next" href="5-1-quatro-pontos.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="zen-do-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><center><a href="./index.html"><img src = "https://raw.githubusercontent.com/curso-r/site-v2/master/static/img/logo_cursor_full.png" width = 60%></a></center></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bem-vindo</a></li>
<li class="chapter" data-level="1" data-path="1-introducao.html"><a href="1-introducao.html"><i class="fa fa-check"></i><b>1</b> Introdução</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1-1-sobre-o-livro.html"><a href="1-1-sobre-o-livro.html"><i class="fa fa-check"></i><b>1.1</b> Sobre o livro</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="1-1-sobre-o-livro.html"><a href="1-1-sobre-o-livro.html#o-que-você-vai-aprender"><i class="fa fa-check"></i><b>1.1.1</b> O que você vai aprender</a></li>
<li class="chapter" data-level="1.1.2" data-path="1-1-sobre-o-livro.html"><a href="1-1-sobre-o-livro.html#o-que-você-não-vai-aprender"><i class="fa fa-check"></i><b>1.1.2</b> O que você não vai aprender</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-2-pré-requisitos.html"><a href="1-2-pré-requisitos.html"><i class="fa fa-check"></i><b>1.2</b> Pré-requisitos</a></li>
<li class="chapter" data-level="1.3" data-path="1-3-principais-referências.html"><a href="1-3-principais-referências.html"><i class="fa fa-check"></i><b>1.3</b> Principais referências</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-rdata-rhistory.html"><a href="2-rdata-rhistory.html"><i class="fa fa-check"></i><b>2</b> .RData e .Rhistory</a>
<ul>
<li class="chapter" data-level="2.1" data-path="2-1-por-que-desistir.html"><a href="2-1-por-que-desistir.html"><i class="fa fa-check"></i><b>2.1</b> Por que desistir</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-como-desativar.html"><a href="2-2-como-desativar.html"><i class="fa fa-check"></i><b>2.2</b> Como desativar</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-rproj-dir.html"><a href="3-rproj-dir.html"><i class="fa fa-check"></i><b>3</b> Rproj e diretórios</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3-1-diretório-de-trabalho.html"><a href="3-1-diretório-de-trabalho.html"><i class="fa fa-check"></i><b>3.1</b> Diretório de trabalho</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-git-github.html"><a href="4-git-github.html"><i class="fa fa-check"></i><b>4</b> Git e GitHub</a></li>
<li class="chapter" data-level="5" data-path="5-funcoes-deps.html"><a href="5-funcoes-deps.html"><i class="fa fa-check"></i><b>5</b> Funções e dependências</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5-1-quatro-pontos.html"><a href="5-1-quatro-pontos.html"><i class="fa fa-check"></i><b>5.1</b> Quatro-pontos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-pacotes.html"><a href="6-pacotes.html"><i class="fa fa-check"></i><b>6</b> Pacotes</a>
<ul>
<li class="chapter" data-level="6.1" data-path="6-1-documentação.html"><a href="6-1-documentação.html"><i class="fa fa-check"></i><b>6.1</b> Documentação</a></li>
<li class="chapter" data-level="6.2" data-path="6-2-imports.html"><a href="6-2-imports.html"><i class="fa fa-check"></i><b>6.2</b> Imports</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-data-data-raw.html"><a href="7-data-data-raw.html"><i class="fa fa-check"></i><b>7</b> Data e data-raw</a>
<ul>
<li class="chapter" data-level="7.1" data-path="6-1-documentação.html"><a href="6-1-documentação.html#documentação"><i class="fa fa-check"></i><b>7.1</b> Documentação</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-testes.html"><a href="8-testes.html"><i class="fa fa-check"></i><b>8</b> Testes automatizados</a></li>
<li class="chapter" data-level="9" data-path="9-versoes-releases.html"><a href="9-versoes-releases.html"><i class="fa fa-check"></i><b>9</b> Versões e releases</a>
<ul>
<li class="chapter" data-level="9.1" data-path="9-1-versionamento-semântico.html"><a href="9-1-versionamento-semântico.html"><i class="fa fa-check"></i><b>9.1</b> Versionamento semântico</a></li>
<li class="chapter" data-level="9.2" data-path="9-2-releases.html"><a href="9-2-releases.html"><i class="fa fa-check"></i><b>9.2</b> Releases</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Zen do R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="funcoes-deps" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Funções e dependências</h1>
<p>Até este momento, foi abordada apenas uma forma de organizar os arquivos de uma
análise: projetos. Entretanto existe ainda outra maneira, ainda mais
interessante, de guardar análises. Se você programou em R, com certeza já se
deparou com essa ferramenta, os bons e velhos pacotes ou bibliotecas. É
surpreendentemente fácil criar um diretório que pode ser completamente acessado
através da função <code>library()</code>.</p>
<p>Quando uma tarefa de análise de dados aumenta em complexidade, o número de
funções e arquivos necessários para manter tudo em ordem cresce
exponencialmente. Um arquivo para ler os dados, outro para limpar os nomes das
colunas, mais um para fazer joins… Cada um deles com incontáveis blocos de
código que rapidamente se transformam em uma
<a href="https://pt.wikipedia.org/wiki/C%C3%B3digo_espaguete">macarronada</a>.</p>
<p>O primeiro passo para sair dessa situação é transformar tudo em funções. Essa
tarefa está longe de simples, mas os benefícios são imensos; ao encontrar um
erro no resultado, fica bem mais fácil depurar a função culpada do que uma
coleção desordenada de código. Funções têm argumentos e saídas, enquanto código
solto pode modificar globais e criar resultados tardios que são impossíveis de
acompanhar sem conhecer profundamente a tarefa sendo realizada.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="5-funcoes-deps.html#cb6-1" aria-hidden="true"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb6-2"><a href="5-funcoes-deps.html#cb6-2" aria-hidden="true"></a><span class="kw">library</span>(tibble)</span>
<span id="cb6-3"><a href="5-funcoes-deps.html#cb6-3" aria-hidden="true"></a></span>
<span id="cb6-4"><a href="5-funcoes-deps.html#cb6-4" aria-hidden="true"></a><span class="co"># Limpar dados</span></span>
<span id="cb6-5"><a href="5-funcoes-deps.html#cb6-5" aria-hidden="true"></a>mtcars_clean &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span></span>
<span id="cb6-6"><a href="5-funcoes-deps.html#cb6-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;model&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-7"><a href="5-funcoes-deps.html#cb6-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></span>
<span id="cb6-8"><a href="5-funcoes-deps.html#cb6-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>)</span>
<span id="cb6-9"><a href="5-funcoes-deps.html#cb6-9" aria-hidden="true"></a></span>
<span id="cb6-10"><a href="5-funcoes-deps.html#cb6-10" aria-hidden="true"></a><span class="co"># Selecionar carros com 4 cyl e tirar média de mpg e wt</span></span>
<span id="cb6-11"><a href="5-funcoes-deps.html#cb6-11" aria-hidden="true"></a>mtcars_clean <span class="op">%&gt;%</span></span>
<span id="cb6-12"><a href="5-funcoes-deps.html#cb6-12" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">4</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-13"><a href="5-funcoes-deps.html#cb6-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span></span>
<span id="cb6-14"><a href="5-funcoes-deps.html#cb6-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb6-15"><a href="5-funcoes-deps.html#cb6-15" aria-hidden="true"></a>    <span class="dt">mpg =</span> <span class="kw">mean</span>(mpg),</span>
<span id="cb6-16"><a href="5-funcoes-deps.html#cb6-16" aria-hidden="true"></a>    <span class="dt">wt =</span> <span class="kw">mean</span>(wt)</span>
<span id="cb6-17"><a href="5-funcoes-deps.html#cb6-17" aria-hidden="true"></a>  )</span>
<span id="cb6-18"><a href="5-funcoes-deps.html#cb6-18" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb6-19"><a href="5-funcoes-deps.html#cb6-19" aria-hidden="true"></a><span class="co">#&gt;     cyl   mpg    wt</span></span>
<span id="cb6-20"><a href="5-funcoes-deps.html#cb6-20" aria-hidden="true"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb6-21"><a href="5-funcoes-deps.html#cb6-21" aria-hidden="true"></a><span class="co">#&gt; 1     4  26.7  2.29</span></span>
<span id="cb6-22"><a href="5-funcoes-deps.html#cb6-22" aria-hidden="true"></a></span>
<span id="cb6-23"><a href="5-funcoes-deps.html#cb6-23" aria-hidden="true"></a><span class="co"># Selecionar carros com 6 cyl e tirar média de drat e disp</span></span>
<span id="cb6-24"><a href="5-funcoes-deps.html#cb6-24" aria-hidden="true"></a>mtcars_clean <span class="op">%&gt;%</span></span>
<span id="cb6-25"><a href="5-funcoes-deps.html#cb6-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">6</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-26"><a href="5-funcoes-deps.html#cb6-26" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span></span>
<span id="cb6-27"><a href="5-funcoes-deps.html#cb6-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb6-28"><a href="5-funcoes-deps.html#cb6-28" aria-hidden="true"></a>    <span class="dt">drat =</span> <span class="kw">mean</span>(drat),</span>
<span id="cb6-29"><a href="5-funcoes-deps.html#cb6-29" aria-hidden="true"></a>    <span class="dt">disp =</span> <span class="kw">mean</span>(disp)</span>
<span id="cb6-30"><a href="5-funcoes-deps.html#cb6-30" aria-hidden="true"></a>  )</span>
<span id="cb6-31"><a href="5-funcoes-deps.html#cb6-31" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb6-32"><a href="5-funcoes-deps.html#cb6-32" aria-hidden="true"></a><span class="co">#&gt;     cyl  drat  disp</span></span>
<span id="cb6-33"><a href="5-funcoes-deps.html#cb6-33" aria-hidden="true"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb6-34"><a href="5-funcoes-deps.html#cb6-34" aria-hidden="true"></a><span class="co">#&gt; 1     6  3.59  183.</span></span></code></pre></div>
<p>O código acima é somente um exemplo de análise. Como descrito pelos comentários,
<code>mtcars</code> é limpa e depois são extraídas as médias de diferentes variáveis para
duas seleções da tabela (número de cilindros igual a 4 e 6). Abaixo está
descrita uma forma de transformar a maioria deste código em funções. É verdade
que pela natureza simples do exemplo, fica difícil ver os benefícios do
encapsulamento das tarefas de limpeza e resumo, mas perceba, por exemplo, que,
se fosse necessário trocar <code>mean()</code> por <code>median()</code>, antes seria necessário
alterar quatro linhas e agora apenas uma. Esse tipo de ganho a longo prazo pode
salvar análises inteiras do caos.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="5-funcoes-deps.html#cb7-1" aria-hidden="true"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb7-2"><a href="5-funcoes-deps.html#cb7-2" aria-hidden="true"></a><span class="kw">library</span>(tibble)</span>
<span id="cb7-3"><a href="5-funcoes-deps.html#cb7-3" aria-hidden="true"></a></span>
<span id="cb7-4"><a href="5-funcoes-deps.html#cb7-4" aria-hidden="true"></a><span class="co"># Limpa tabela, filtrando cyl &lt; cyl_max</span></span>
<span id="cb7-5"><a href="5-funcoes-deps.html#cb7-5" aria-hidden="true"></a>clean &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">cyl_max =</span> <span class="dv">8</span>) {</span>
<span id="cb7-6"><a href="5-funcoes-deps.html#cb7-6" aria-hidden="true"></a>  data <span class="op">%&gt;%</span></span>
<span id="cb7-7"><a href="5-funcoes-deps.html#cb7-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;model&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb7-8"><a href="5-funcoes-deps.html#cb7-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span></span>
<span id="cb7-9"><a href="5-funcoes-deps.html#cb7-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">&lt;</span><span class="st"> </span>cyl_max)</span>
<span id="cb7-10"><a href="5-funcoes-deps.html#cb7-10" aria-hidden="true"></a>}</span>
<span id="cb7-11"><a href="5-funcoes-deps.html#cb7-11" aria-hidden="true"></a></span>
<span id="cb7-12"><a href="5-funcoes-deps.html#cb7-12" aria-hidden="true"></a><span class="co"># Resume tabela onde cyl == cyl_max, tirando média das colunas em ...</span></span>
<span id="cb7-13"><a href="5-funcoes-deps.html#cb7-13" aria-hidden="true"></a>summarise_cyl &lt;-<span class="st"> </span><span class="cf">function</span>(data, cyl_num, ...) {</span>
<span id="cb7-14"><a href="5-funcoes-deps.html#cb7-14" aria-hidden="true"></a>  data <span class="op">%&gt;%</span></span>
<span id="cb7-15"><a href="5-funcoes-deps.html#cb7-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span>cyl_num) <span class="op">%&gt;%</span></span>
<span id="cb7-16"><a href="5-funcoes-deps.html#cb7-16" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span></span>
<span id="cb7-17"><a href="5-funcoes-deps.html#cb7-17" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(...), mean)</span>
<span id="cb7-18"><a href="5-funcoes-deps.html#cb7-18" aria-hidden="true"></a>}</span>
<span id="cb7-19"><a href="5-funcoes-deps.html#cb7-19" aria-hidden="true"></a></span>
<span id="cb7-20"><a href="5-funcoes-deps.html#cb7-20" aria-hidden="true"></a><span class="co"># 4 cyl, média de mpg e wt</span></span>
<span id="cb7-21"><a href="5-funcoes-deps.html#cb7-21" aria-hidden="true"></a>mtcars <span class="op">%&gt;%</span></span>
<span id="cb7-22"><a href="5-funcoes-deps.html#cb7-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">clean</span>(<span class="dt">cyl_max =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span></span>
<span id="cb7-23"><a href="5-funcoes-deps.html#cb7-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise_cyl</span>(<span class="dt">cyl_num =</span> <span class="dv">4</span>, mpg, wt)</span>
<span id="cb7-24"><a href="5-funcoes-deps.html#cb7-24" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb7-25"><a href="5-funcoes-deps.html#cb7-25" aria-hidden="true"></a><span class="co">#&gt;     cyl   mpg    wt</span></span>
<span id="cb7-26"><a href="5-funcoes-deps.html#cb7-26" aria-hidden="true"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb7-27"><a href="5-funcoes-deps.html#cb7-27" aria-hidden="true"></a><span class="co">#&gt; 1     4  26.7  2.29</span></span>
<span id="cb7-28"><a href="5-funcoes-deps.html#cb7-28" aria-hidden="true"></a></span>
<span id="cb7-29"><a href="5-funcoes-deps.html#cb7-29" aria-hidden="true"></a><span class="co"># 6 cyl, média de drat e disp</span></span>
<span id="cb7-30"><a href="5-funcoes-deps.html#cb7-30" aria-hidden="true"></a>mtcars <span class="op">%&gt;%</span></span>
<span id="cb7-31"><a href="5-funcoes-deps.html#cb7-31" aria-hidden="true"></a><span class="st">  </span><span class="kw">clean</span>(<span class="dt">cyl_max =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span></span>
<span id="cb7-32"><a href="5-funcoes-deps.html#cb7-32" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise_cyl</span>(<span class="dt">cyl_num =</span> <span class="dv">6</span>, drat, disp)</span>
<span id="cb7-33"><a href="5-funcoes-deps.html#cb7-33" aria-hidden="true"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb7-34"><a href="5-funcoes-deps.html#cb7-34" aria-hidden="true"></a><span class="co">#&gt;     cyl  drat  disp</span></span>
<span id="cb7-35"><a href="5-funcoes-deps.html#cb7-35" aria-hidden="true"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb7-36"><a href="5-funcoes-deps.html#cb7-36" aria-hidden="true"></a><span class="co">#&gt; 1     6  3.59  183.</span></span></code></pre></div>
<p>Um código bem encapsulado reduz a necessidade de objetos intermediários (
<code>base_tratada</code>, <code>base_filtrada</code>, etc.) pois para gerar um deles basta a
aplicação de uma função. Além disso, programas com funções normalmente são muito
mais enxutos e limpos do que <em>scripts</em> soltos, pois estes estimulam repetição de
código. Às vezes é mais rápido copiar e colar um pedaço de código e adaptá-lo ao
novo contexto do que criar uma função que generalize a operação desejada para as
duas situações, mas os benefícios das funções são de longo prazo: ao encontrar
um <em>bug</em>, haverá apenas um lugar para concertar; se surgir a necessidade de
modificar uma propriedade, haverá apenas um lugar para editar; se aquele código
se tornar obsoleto, haverá apenas um lugar para deletar.</p>
<p>Pense na programação funcional<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> como ir à academia. No início o processo é
difícil e exige uma quantidade considerável de esforço, mas depois de um tempo
se torna um hábito e traz benefícios consideráveis para a saúde (neste caso, do
código). As recomendações para quando criar uma nova função ou separar uma
função em duas variam muito, mas normalmente é uma boa ideia não deixar uma
única função ser encarregada de mais uma tarefa ou ficar longa/complexa demais.</p>
<p>No mundo ideal, na pasta <code>R/</code> do seu projeto haverá uma coleção de arquivos,
cada um com uma coleção de funções relacionadas e bem documentadas, e apenas
alguns arquivos que utilizam essas funções para realizar a análise em si. Como
dito anteriormente, isso fica muito mais fácil se você já tiver esse objetivo em
mente desde o momento de criação do novo projeto.</p>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>Aqui o termo “programação funcional” é usado de forma figurativa. Na
computação linguagens denominadas “funcionais” tem um <em>modus operandi</em> bastante
específico não abordado neste capítulo.<a href="5-funcoes-deps.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="4-git-github.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="5-1-quatro-pontos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/curso-r/zen-do-r/edit/master/funcoes-deps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
