<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Dados | O Zen do R</title>
  <meta name="description" content="O objetivo deste livro é ensinar ao leitor algumas formas simples de melhorar a organização de seus projetos de análise de dados em R." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Dados | O Zen do R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="O objetivo deste livro é ensinar ao leitor algumas formas simples de melhorar a organização de seus projetos de análise de dados em R." />
  <meta name="github-repo" content="curso-r/zen-do-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Dados | O Zen do R" />
  
  <meta name="twitter:description" content="O objetivo deste livro é ensinar ao leitor algumas formas simples de melhorar a organização de seus projetos de análise de dados em R." />
  

<meta name="author" content="C. Lente" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="versoes.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="zen-do-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">O Zen do R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bem-vindo</a></li>
<li class="chapter" data-level="1" data-path="introducao.html"><a href="introducao.html"><i class="fa fa-check"></i><b>1</b> Introdução</a><ul>
<li class="chapter" data-level="1.1" data-path="introducao.html"><a href="introducao.html#sobre-o-livro"><i class="fa fa-check"></i><b>1.1</b> Sobre o livro</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introducao.html"><a href="introducao.html#o-que-voce-vai-aprender"><i class="fa fa-check"></i><b>1.1.1</b> O que você vai aprender</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introducao.html"><a href="introducao.html#o-que-voce-nao-vai-aprender"><i class="fa fa-check"></i><b>1.2</b> O que você não vai aprender</a></li>
<li class="chapter" data-level="1.3" data-path="introducao.html"><a href="introducao.html#pre-requisitos"><i class="fa fa-check"></i><b>1.3</b> Pré-requisitos</a></li>
<li class="chapter" data-level="1.4" data-path="introducao.html"><a href="introducao.html#principais-referencias"><i class="fa fa-check"></i><b>1.4</b> Principais referências</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ambiente.html"><a href="ambiente.html"><i class="fa fa-check"></i><b>2</b> Ambiente</a><ul>
<li class="chapter" data-level="2.1" data-path="ambiente.html"><a href="ambiente.html#sobre-o-ambiente"><i class="fa fa-check"></i><b>2.1</b> Sobre o ambiente</a></li>
<li class="chapter" data-level="2.2" data-path="ambiente.html"><a href="ambiente.html#rdata-e-.rhistory"><i class="fa fa-check"></i><b>2.2</b> .RData e .Rhistory</a><ul>
<li class="chapter" data-level="2.2.1" data-path="ambiente.html"><a href="ambiente.html#porque-desistir-desse-recurso"><i class="fa fa-check"></i><b>2.2.1</b> Porque desistir desse recurso</a></li>
<li class="chapter" data-level="2.2.2" data-path="ambiente.html"><a href="ambiente.html#como-desativar-essa-funcionalidade"><i class="fa fa-check"></i><b>2.2.2</b> Como desativar essa funcionalidade</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="ambiente.html"><a href="ambiente.html#rproj-e-diretorios"><i class="fa fa-check"></i><b>2.3</b> Rproj e diretórios</a><ul>
<li class="chapter" data-level="2.3.1" data-path="ambiente.html"><a href="ambiente.html#diretorio-de-trabalho"><i class="fa fa-check"></i><b>2.3.1</b> Diretório de trabalho</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="versoes.html"><a href="versoes.html"><i class="fa fa-check"></i><b>3</b> Versões</a><ul>
<li class="chapter" data-level="3.1" data-path="versoes.html"><a href="versoes.html#sobre-versoes"><i class="fa fa-check"></i><b>3.1</b> Sobre versões</a></li>
<li class="chapter" data-level="3.2" data-path="versoes.html"><a href="versoes.html#git-e-github"><i class="fa fa-check"></i><b>3.2</b> Git e Github</a></li>
<li class="chapter" data-level="3.3" data-path="versoes.html"><a href="versoes.html#packrat"><i class="fa fa-check"></i><b>3.3</b> Packrat</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dados.html"><a href="dados.html"><i class="fa fa-check"></i><b>4</b> Dados</a><ul>
<li class="chapter" data-level="4.1" data-path="dados.html"><a href="dados.html#sobre-dados"><i class="fa fa-check"></i><b>4.1</b> Sobre dados</a></li>
<li class="chapter" data-level="4.2" data-path="dados.html"><a href="dados.html#funcoes-e-dependencias"><i class="fa fa-check"></i><b>4.2</b> Funções e dependências</a><ul>
<li class="chapter" data-level="4.2.1" data-path="dados.html"><a href="dados.html#section"><i class="fa fa-check"></i><b>4.2.1</b> ::</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dados.html"><a href="dados.html#pacotes"><i class="fa fa-check"></i><b>4.3</b> Pacotes</a><ul>
<li class="chapter" data-level="4.3.1" data-path="dados.html"><a href="dados.html#documentacao"><i class="fa fa-check"></i><b>4.3.1</b> Documentação</a></li>
<li class="chapter" data-level="4.3.2" data-path="dados.html"><a href="dados.html#testes-automatizados"><i class="fa fa-check"></i><b>4.3.2</b> Testes automatizados</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dados.html"><a href="dados.html#data-e-data-raw"><i class="fa fa-check"></i><b>4.4</b> Data e data-raw</a><ul>
<li class="chapter" data-level="4.4.1" data-path="dados.html"><a href="dados.html#documentacao-1"><i class="fa fa-check"></i><b>4.4.1</b> Documentação</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">O Zen do R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dados" class="section level1">
<h1><span class="header-section-number">4</span> Dados</h1>
<div id="sobre-dados" class="section level2">
<h2><span class="header-section-number">4.1</span> Sobre dados</h2>
<p>Lorem ipsum</p>
</div>
<div id="funcoes-e-dependencias" class="section level2">
<h2><span class="header-section-number">4.2</span> Funções e dependências</h2>
<p>Até este momento, foi abordada apenas uma forma de organizar os arquivos de uma
análise: projetos. Entretanto existe ainda outra maneira, ainda mais
interessante, de guardar análises. Se você programou em R, com certeza já se
deparou com essa ferramenta, os bons e velhos pacotes ou bibliotecas. É
surpreendentemente fácil criar um diretório que pode ser completamente acessado
através da função <code>library()</code>.</p>
<p>Quando uma tarefa de análise de dados aumenta em complexidade, o número de
funções e arquivos necessários para manter tudo em ordem cresce
exponencialmente. Um arquivo para ler os dados, outro para limpar os nomes das
colunas, mais um para fazer joins… Cada um deles com incontáveis blocos de
código que rapidamente se transformam em uma
<a href="https://pt.wikipedia.org/wiki/C%C3%B3digo_espaguete">macarronada</a>.</p>
<p>O primeiro passo para sair dessa situação é transformar tudo em funções. Essa
tarefa está longe de simples, mas os benefícios são imensos; ao encontrar um
erro no resultado, fica bem mais fácil depurar a função culpada do que uma
coleção desordenada de código. Funções têm argumentos e saídas, enquanto código
solto pode modificar globais e criar resultados tardios que são impossíveis de
acompanhar sem conhecer profundamente a tarefa sendo realizada.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(tibble)

<span class="co"># Limpar dados</span>
mtcars_clean &lt;-<span class="st"> </span>mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;model&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>)

<span class="co"># Selecionar carros com 4 cyl e tirar média de mpg e wt</span>
mtcars_clean <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">4</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">mpg =</span> <span class="kw">mean</span>(mpg),
    <span class="dt">wt =</span> <span class="kw">mean</span>(wt)
  )
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;     cyl   mpg    wt</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     4  26.7  2.29</span>

<span class="co"># Selecionar carros com 6 cyl e tirar média de drat e disp</span>
mtcars_clean <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">6</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(
    <span class="dt">drat =</span> <span class="kw">mean</span>(drat),
    <span class="dt">disp =</span> <span class="kw">mean</span>(disp)
  )
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;     cyl  drat  disp</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     6  3.59  183.</span></code></pre>
<p>O código acima é somente um exemplo de análise. Como descrito pelos comentários,
<code>mtcars</code> é limpa e depois são extraídas as médias de diferentes variáveis para
duas seleções da tabela (número de cilindros igual a 4 e 6). Abaixo está
descrita uma forma de transformar a maioria deste código em funções. É verdade
que pela natureza simples do exemplo, fica difícil ver os benefícios do
encapsulamento das tarefas de limpeza e resumo, mas perceba, por exemplo, que,
se fosse necessário trocar <code>mean()</code> por <code>median()</code>, antes seria necessário
alterar quatro linhas e agora apenas uma. Esse tipo de ganho a longo prazo pode
salvar análises inteiras do caos.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(tibble)

<span class="co"># Limpa tabela, filtrando cyl &lt; cyl_max</span>
clean &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">cyl_max =</span> <span class="dv">8</span>) {
  data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;model&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">&lt;</span><span class="st"> </span>cyl_max)
}

<span class="co"># Resume tabela onde cyl == cyl_max, tirando média das colunas em ...</span>
summarise_cyl &lt;-<span class="st"> </span><span class="cf">function</span>(data, cyl_num, ...) {
  data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span>cyl_num) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(...), mean)
}

<span class="co"># 4 cyl, média de mpg e wt</span>
mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">clean</span>(<span class="dt">cyl_max =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise_cyl</span>(<span class="dt">cyl_num =</span> <span class="dv">4</span>, mpg, wt)
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;     cyl   mpg    wt</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     4  26.7  2.29</span>

<span class="co"># 6 cyl, média de drat e disp</span>
mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">clean</span>(<span class="dt">cyl_max =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise_cyl</span>(<span class="dt">cyl_num =</span> <span class="dv">6</span>, drat, disp)
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;     cyl  drat  disp</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     6  3.59  183.</span></code></pre>
<p>Um código bem encapsulado reduz a necessidade de objetos intermediários (
<code>base_tratada</code>, <code>base_filtrada</code>, etc.) pois para gerar um deles basta a
aplicação de uma função. Além disso, programas com funções normalmente são muito
mais enxutos e limpos do que <em>scripts</em> soltos, pois estes estimulam repetição de
código. Às vezes é mais rápido copiar e colar um pedaço de código e adaptá-lo ao
novo contexto do que criar uma função que generalize a operação desejada para as
duas situações, mas os benefícios das funções são de longo prazo: ao encontrar
um <em>bug</em>, haverá apenas um lugar para concertar; se surgir a necessidade de
modificar uma propriedade, haverá apenas um lugar para editar; se aquele código
se tornar obsoleto, haverá apenas um lugar para deletar.</p>
<p>Pense na programação funcional<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> como ir à academia. No início o processo é
difícil e exige uma quantidade considerável de esforço, mas depois de um tempo
se torna um hábito e traz benefícios consideráveis para a saúde (neste caso, do
código). As recomendações para quando criar uma nova função ou separar uma
função em duas variam muito, mas normalmente é uma boa ideia não deixar uma
única função ser encarregada de mais uma tarefa ou ficar longa/complexa demais.</p>
<p>No mundo ideal, na pasta <code>R/</code> do seu projeto haverá uma coleção de arquivos,
cada um com uma coleção de funções relacionadas e bem documentadas, e apenas
alguns arquivos que utilizam essas funções para realizar a análise em si. Como
dito anteriormente, isso fica muito mais fácil se você já tiver esse objetivo em
mente desde o momento de criação do novo projeto.</p>
<div id="section" class="section level3">
<h3><span class="header-section-number">4.2.1</span> ::</h3>
<p>No exemplo da seção anterior, é possível notar as chamadas para as bibliotecas
<code>dplyr</code> e <code>tibble</code>. Elas têm inúmeras funções úteis, mas aqui somente algumas
poucas foram utilizadas. Além disso, se o código fosse muito maior, ficaria
impossível saber de uma biblioteca ainda está sendo utilizada; se não fosse mais
necessário utilizar <code>rownames_to_column()</code>, qual seria a melhor forma de saber
que pode ser removida a chamada <code>library(tibble)</code>?</p>
<p>A resposta para essa pergunta pode assustar: no código ideal, a função
<code>library()</code> nunca seria chamada, todas as funções teriam seus pacotes de origem
explicitamente referenciados pelo operador <code>::</code>.</p>
<p>Esta subseção está separada porque ela de fato é um pouco radical demais. É
excessivamente preciosista pedir para que qualquer análise em R seja feita sem
a invocação de nenhuma biblioteca, apenas com chamadas do tipo
<code>biblioteca::funcao()</code>. Muitas pessoas inclusive nem sabem que é possível
invocar uma função diretamente através dessa sintaxe!</p>
<p>Se algum leitor estiver tendendo a seguir o caminho do TOC da programação,
existem dois grandes benefícios em chamar todas as funções diretamente:
- O código, no total, executa um pouco mais rápido porque são carregadas menos
funções no ambiente global (isso é especialmente importante em aplicações
interativas feitas em Shiny).
- As dependências do código estão sempre atualizadas porque elas estão
diretamente atreladas às próprias funções sendo utilizadas.</p>
<p>Existe um terceiro e importante benefício, mas este será abordado apenas no
próximo capítulo. A título de curiosidade, o código anterior ficaria assim caso
fosse escrito sem as chamadas para <code>library()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Referência ao pipe</span>
<span class="st">`</span><span class="dt">%&gt;%</span><span class="st">`</span> &lt;-<span class="st"> </span>magrittr<span class="op">::</span><span class="st">`</span><span class="dt">%&gt;%</span><span class="st">`</span>

<span class="co"># Limpa tabela, filtrando cyl &lt; cyl_max</span>
clean &lt;-<span class="st"> </span><span class="cf">function</span>(data, <span class="dt">cyl_max =</span> <span class="dv">8</span>) {
  data <span class="op">%&gt;%</span>
<span class="st">    </span>tibble<span class="op">::</span><span class="kw">rownames_to_column</span>(<span class="dt">var =</span> <span class="st">&quot;model&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">filter</span>(cyl <span class="op">&lt;</span><span class="st"> </span>cyl_max)
}

<span class="co"># Resume tabela onde cyl == cyl_max, tirando média das colunas em ...</span>
summarise_cyl &lt;-<span class="st"> </span><span class="cf">function</span>(data, cyl_num, ...) {
  data <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">filter</span>(cyl <span class="op">==</span><span class="st"> </span>cyl_num) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">summarise_at</span>(dplyr<span class="op">::</span><span class="kw">vars</span>(...), mean)
}

<span class="co"># 4 cyl, média de mpg e wt</span>
mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">clean</span>(<span class="dt">cyl_max =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise_cyl</span>(<span class="dt">cyl_num =</span> <span class="dv">4</span>, mpg, wt)
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;     cyl   mpg    wt</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     4  26.7  2.29</span>

<span class="co"># 6 cyl, média de drat e disp</span>
mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">clean</span>(<span class="dt">cyl_max =</span> <span class="dv">8</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise_cyl</span>(<span class="dt">cyl_num =</span> <span class="dv">6</span>, drat, disp)
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;     cyl  drat  disp</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     6  3.59  183.</span></code></pre>
<p>Se serve de consolo, o RStudio facilita muito esse tipo de programação por causa
da sua capacidade de sugerir continuações para código interativamente. Para
escrever <code>dplyr::</code>, por exemplo, basta digitar <code>d</code>, <code>p</code>, <code>l</code> e apertar <code>TAB</code> uma
vez. Com os <code>::</code>, as sugestões passarão a ser somente de funções daquele pacote.</p>
</div>
</div>
<div id="pacotes" class="section level2">
<h2><span class="header-section-number">4.3</span> Pacotes</h2>
<p>Nas palavras do maior guru do R, Hadley Wickham, “pacotes são a unidade
fundamental de código R reprodutível”. Toda vez que você utiliza a função
<code>library()</code>, algum pacote está sendo carregado na sessão. Muitas vezes criar uma
biblioteca de funções pode parecer uma tarefa árdua e confusa, restrita a
grandes conhecedores da linguagem, mas essa impressão não poderia estar mais
distante da realidade: pacotes para o R são bastante simples e intuitivos de
fazer.</p>
<p>No início deste livro foi abordado o conceito de projeto. Ele não passa de um
arquivo <code>.Rproj</code> que indica para o RStudio que aquele diretório é um ambiente de
trabalho estruturado. Nesse sentido, pacotes iguais a projetos porque eles
também têm um <code>.Rproj</code>; pacotes na verdade <em>são</em> projetos.</p>
<p>A diferença entre os dois é que pacotes podem ser documentados e instalados,
permitindo toda uma gama de novas possibilidades para o programador.
Muitas vezes uma análise de dados pode envolver dezenas de funções e diversas
pessoas, fazendo com que o compartilhamento de código seja vital para que a
análise não fuja do controle. Pacotes permitem gerenciar dependências, manter
documentação, executar testes unitários e muito mais com o objetivo de deixar
todos os analistas na mesma página.</p>
<p>Sendo assim, recomenda-se criar um pacote para qualquer análise que envolva pelo
menos meia dúzia de funções complexas e mais de uma pessoa; caso contrário, um
projeto já é suficiente. Outra motivação para criar um pacote é compartilhar
conjuntos úteis de funções com outras pessoas; isso acaba sendo menos comum para
a maioria dos usuários, mas é importante ressaltar que o R não seria a linguagem
popular que é hoje se não fossem pelas famosas bibliotecas <code>ggplot2</code> e <code>dplyr</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">create_package</span>(<span class="st">&quot;~/Documents/demo&quot;</span>)
<span class="co">#&gt; ✔ Setting active project to &#39;~/Documents/demo&#39;</span>
<span class="co">#&gt; ✔ Creating &#39;R/&#39;</span>
<span class="co">#&gt; ✔ Writing &#39;DESCRIPTION&#39;</span>
<span class="co">#&gt; Package: demo</span>
<span class="co">#&gt; Title: What the Package Does (One Line, Title Case)</span>
<span class="co">#&gt; Version: 0.0.0.9000</span>
<span class="co">#&gt; Authors@R (parsed):</span>
<span class="co">#&gt;     * First Last &lt;first.last@example.com&gt; [aut, cre] (&lt;https://orcid.org/YOUR-ORCID-ID&gt;)</span>
<span class="co">#&gt; Description: What the package does (one paragraph).</span>
<span class="co">#&gt; License: What license it uses</span>
<span class="co">#&gt; Encoding: UTF-8</span>
<span class="co">#&gt; LazyData: true</span>
<span class="co">#&gt; ✔ Writing &#39;NAMESPACE&#39;</span>
<span class="co">#&gt; ✔ Writing &#39;demo.Rproj&#39;</span>
<span class="co">#&gt; ✔ Adding &#39;.Rproj.user&#39; to &#39;.gitignore&#39;</span>
<span class="co">#&gt; ✔ Adding &#39;^demo\\.Rproj$&#39;, &#39;^\\.Rproj\\.user$&#39; to &#39;.Rbuildignore&#39;</span>
<span class="co">#&gt; ✔ Opening &#39;~/Documents/demo/&#39; in new RStudio session</span>
<span class="co">#&gt; ✔ Setting active project to &#39;demo&#39;</span></code></pre>
<p>A função executada acima é exatamente análoga à função de criação de projetos.
A principal diferença é que ela cria um arquivo <code>DESCRIPTION</code> e assume que o
nome do pacote é igual ao nome da pasta onde o mesmo está sendo criado (neste
caso, “demo”). Alguns outros arquivos também são criados (como <code>.Rbuildignore</code> e
<code>NAMESPACE</code>), mas eles não vêm ao caso. De resto, o pacote é idêntico a um
projeto e pode ser sincronizado com o Git exatamente da mesma maneira.</p>
<p>O primeiro passo para começar a usar um pacote é atribuir a ele uma licença
(caso um dia você resolva compartilhá-lo com o mundo) e preencher a descrição.
Abaixo encontra-se uma função simples que adiciona uma licença MIT ao pacote.</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_mit_license</span>(<span class="st">&quot;Seu Nome&quot;</span>)
<span class="co">#&gt; ✔ Setting active project to &#39;~/Documents/demo&#39;</span>
<span class="co">#&gt; ✔ Setting License field in DESCRIPTION to &#39;MIT + file LICENSE&#39;</span>
<span class="co">#&gt; ✔ Writing &#39;LICENSE.md&#39;</span>
<span class="co">#&gt; ✔ Adding &#39;^LICENSE\\.md$&#39; to &#39;.Rbuildignore&#39;</span>
<span class="co">#&gt; ✔ Writing &#39;LICENSE&#39;</span></code></pre>
<p>O arquivo de descrição, no entanto, é um pouco mais complexo porque ele tem
alguns campos que precisam ser preenchidos manualmente. Quando o pacote for
criado, eles já estarão populados com instruções para facilitar a vida do
programador. Abaixo está um exemplo de como <code>DESCRIPTION</code> deve ficar depois de
completo:</p>
<pre><code>Package: demo
Title: O Que o Pacote Faz (Uma Linha)
Version: 0.0.0.9000
Authors@R: 
    person(given = &quot;Seu&quot;,
           family = &quot;Nome&quot;,
           role = c(&quot;aut&quot;, &quot;cre&quot;),
           email = &quot;seunome@dominio.com&quot;)
Description: O que o pacote faz (um paragrafo curto terminado em ponto final).
License: MIT + file LICENSE
Encoding: UTF-8
LazyData: true</code></pre>
<p>A partir deste ponto, os metadados do pacote estão essencialmente prontos e não
precisam mais ser modificados. Assim como em um projeto, o que resta é adicionar
arquivos com funções à pasta <code>R/</code>.</p>
<div id="documentacao" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Documentação</h3>
<p>Para poder programar pacotes com mais facilidade, é necessário instalar o
<code>devtools</code>. Assim como o <code>tidyverse</code>, este é um conjunto de pacotes (que inclui
o <code>usethis</code> por sinal) que auxiliam no processo de criar e testar um pacote de
R.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</code></pre>
<p>A partir de agora você pode, por exemplo, criar documentações para as funções do
seu pacote. Quando outras pessoas o instalarem, elas poderão consultar esses
manuais da mesma forma que fazem com qualquer outra função: <code>?funcao()</code>.</p>
<p>A documentação mais simples (e obrigatória) envolve dar um título para a função
e descrever o que cada parâmetro significa. Para documentar uma função qualquer,
basta adicionar comentários em cima dela com <code>#'</code> assim como no exemplo abaixo:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; Função demonstrativa que soma e imprime</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @param x Um número ou vetor numérico</span>
<span class="co">#&#39; @param y Um número ou vetor numérico</span>
<span class="co">#&#39; @param ... Outros argumentos passados para [print()]</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @export</span>
funcao_demo &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, ...) {
  z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y
  <span class="kw">print</span>(z, ...)
  <span class="kw">return</span>(z)
}</code></pre>
<p>No RStudio esse tipo de documentação é tratado diferentemente de outros
comentários, então certas palavras-chave ficam coloridas. <code>@param</code> por exemplo
indica a documentação de um dos parâmetros e <code>@export</code> indica que aquela função
será exportada pelo pacote, ou seja, ficará disponível ao usuário quando ele
executar <code>library(demo)</code>.</p>
<p>Para gerar a documentação do pacote, basta chamar uma outra função do
<code>devtools</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">document</span>()
<span class="co">#&gt; Updating demo documentation</span>
<span class="co">#&gt; Updating roxygen version in ~/Documents/demo/DESCRIPTION</span>
<span class="co">#&gt; Writing NAMESPACE</span>
<span class="co">#&gt; Loading demo</span>
<span class="co">#&gt; Writing NAMESPACE</span>
<span class="co">#&gt; Writing funcao_demo.Rd</span>

?<span class="kw">funcao_demo</span>()
<span class="co">#&gt; Rendering development documentation for &#39;funcao_demo&#39;</span></code></pre>
<p><img src="static/04_doc.png" style="display: block; margin: auto;" /></p>
<p>Conforme o número de funções no pacote for crescendo, basta iterar nesse ciclo
descrito até aqui. Além disso, é importante lembrar (como destacado na sessão
anterior) que qualquer função utilizada de outro pacote deve ser invocada na
forma <code>pacote::funcao()</code>; neste momento, o pacote em questão se tornará uma
<em>dependência</em> do seu pacote e deve ser declarado como tal com
<code>usethis::use_package("pacote")</code>.</p>
<p>Para garantir que o R não encontrará nenhum problema no seu pacote, basta
executar a função de verificação <code>devtools::check()</code>. Se nenhum defeito for
encontrado, basta compartilhar o pacote com os seus colegas e instalá-lo com
<code>devtools::install_local()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">check</span>()
<span class="co">#&gt; Updating demo documentation</span>
<span class="co">#&gt; Writing NAMESPACE</span>
<span class="co">#&gt; Loading demo</span>
<span class="co">#&gt; Writing NAMESPACE</span>
<span class="co">#&gt; ── Building ───────────────────────────────────────────────────────── demo ──</span>
<span class="co">#&gt; Setting env vars:</span>
<span class="co">#&gt; ● CFLAGS    : -Wall -pedantic -fdiagnostics-color=always</span>
<span class="co">#&gt; ● CXXFLAGS  : -Wall -pedantic -fdiagnostics-color=always</span>
<span class="co">#&gt; ● CXX11FLAGS: -Wall -pedantic -fdiagnostics-color=always</span>
<span class="co">#&gt; ─────────────────────────────────────────────────────────────────────────────</span>
<span class="co">#&gt; ✔  checking for file ‘/home/clente/Documents/demo/DESCRIPTION’ ...</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [... omitido por brevidade ...]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ── R CMD check results ───────────────────────────────── demo 0.0.0.9000 ────</span>
<span class="co">#&gt; Duration: 8.2s</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; 0 errors ✔ | 0 warnings ✔ | 0 notes ✔</span></code></pre>
</div>
<div id="testes-automatizados" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Testes automatizados</h3>
<p>Antes de concluir a sessão sobre pacotes, se faz necessária uma breve menção aos
testes automatizados. Eles são disponibilizados pelo pacote <code>testthat</code> e
permitem que um programador verifique que seu código está atendendo às
especificações. Testes unitários garantem que uma alteração pontual em algum
ponto do código não vai alterar o comportamento de nenhuma outra parte, já que
as outras funções ainda terão que passar nos seus próprios testes.</p>
<p>Para criar um conjunto de testes é necessário primeiro criar o ambiente para tal
dentro do pacote. Depois disso, basta criar conjuntos individuais de testes para
cada função.</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_testthat</span>()
<span class="co">#&gt; ✔ Adding &#39;testthat&#39; to Suggests field in DESCRIPTION</span>
<span class="co">#&gt; ✔ Creating &#39;tests/testthat/&#39;</span>
<span class="co">#&gt; ✔ Writing &#39;tests/testthat.R&#39;</span>
<span class="co">#&gt; ● Call `use_test()` to initialize a basic test file and open it for editing.</span>

usethis<span class="op">::</span><span class="kw">use_test</span>(<span class="st">&quot;funcao_demo&quot;</span>)
<span class="co">#&gt; ✔ Increasing &#39;testthat&#39; version to &#39;&gt;= 2.1.0&#39; in DESCRIPTION</span>
<span class="co">#&gt; ✔ Writing &#39;tests/testthat/test-funcao_demo.R&#39;</span>
<span class="co">#&gt; ● Modify &#39;tests/testthat/test-funcao_demo.R&#39;</span></code></pre>
<p>Como é possível notar, o pacote <code>testthat</code> permite criar um arquivo de testes
para <code>funcao_demo()</code> (neste caso <code>tests/testthat/test-funcao_demo.R</code>). Esse
arquivo já vem com um teste padrão a título de demonstração, mas, depois de
reescrito manualmente, um possível conjunto de testes para <code>funcao_demo()</code> seria
o seguinte:</p>
<pre><code>library(demo)

test_that(&quot;funcao_demo funciona&quot;, {

  expect_equal(funcao_demo(1, 2), 3)
  expect_equal(funcao_demo(-1, -2), -3)
  expect_equal(funcao_demo(1, -2), -1)

  expect_output(funcao_demo(1, 2), &quot;3&quot;)

})</code></pre>
<p>E o resultado da execução dos testes é o seguinte:</p>
<pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">test</span>()
<span class="co">#&gt; Loading demo</span>
<span class="co">#&gt; Testing demo</span>
<span class="co">#&gt; ✔ |  OK F W S | Context</span>
<span class="co">#&gt; ✔ |   4       | funcao_demo</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ══ Results ═════════════════════════════════════════════════════════════════════</span>
<span class="co">#&gt; OK:       4</span>
<span class="co">#&gt; Failed:   0</span>
<span class="co">#&gt; Warnings: 0</span>
<span class="co">#&gt; Skipped:  0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Keep up the good work.</span></code></pre>
</div>
</div>
<div id="data-e-data-raw" class="section level2">
<h2><span class="header-section-number">4.4</span> Data e data-raw</h2>
<p>Na seção anterior, foi discutida a importância de empacotar uma análise. Seja
para organizar dependências, reutilizar código, manter testes automatizados, ou
qualquer outra razão, pacotes são a melhor forma de guardar e compartilhar
código em R. Mas, apesar de toda a conversa sobre programação, pouco foi
abordado sobre outro elemento essencial de uma análise de dados: dados.</p>
<p>Felizmente, pacotes em R têm lugares específicos para guardar dados brutos e
dados tratados. São as pastas <code>data</code> e <code>data-raw</code>, cada uma com as suas
propriedades e possibilidades. Ambas podem ser criadas com facilidades por
funções do pacote <code>usethis</code>, então elas se encaixam perfeitamente no fluxo de
análise descrito até agora.</p>
<p>Como indicado anteriormente, existem dois tipos de dados: brutos e tratados.
Normalmente dados brutos estão em formatos comumente compartilhados em ambientes
de trabalho: planilhas Excel, arquivos CSV, etc. Os pacotes <code>readxl</code> e <code>readr</code>
permitem que esses formatos sejam importados para dentro do R, mas normalmente
essas funções são mais lentas e menos padronizadas do que <code>readRDS()</code>, por
exemplo, que lê arquivos no formato nativo do R.</p>
<p>Além disso, raramente os dados recebidos durante uma análise estarão
perfeitamente organizados e padronizados. É comum precisar de múltiplos fluxos
de tratamento para poder transformar os dados brutos naquilo que de fato pode
ser utilizado durante uma análise.</p>
<p>O programador é encorajado a separar essas planilhas brutas daquelas resultantes
do processo de limpeza e tratamento. Junto com os dados crús, é importante
também guardar os arquivos que fazem o processo de limpeza; caso haja uma
mudança nas demandas ou nas bases, o analista precisa ser capaz de alterar os
<em>scripts</em> de tratamento e gerar novas bases consolidadas.</p>
<p>No exemplo abaixo, supõe-se um diretório com um pacote R e uma base bruta
denominada <code>dados.xlsx</code>. Primeiramente deve-se executar a função
<code>usethis::use_data_raw()</code> para criar a pasta <code>data-raw</code> e um arquivo de
tratamento para a base em questão.</p>
<pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw">use_data_raw</span>(<span class="st">&quot;dados&quot;</span>)
<span class="co">#&gt; ✔ Setting active project to &#39;~/Documents/demo&#39;</span>
<span class="co">#&gt; ✔ Creating &#39;data-raw/&#39;</span>
<span class="co">#&gt; ✔ Adding &#39;^data-raw$&#39; to &#39;.Rbuildignore&#39;</span>
<span class="co">#&gt; ✔ Writing &#39;data-raw/dados.R&#39;</span>
<span class="co">#&gt; ● Modify &#39;data-raw/dados.R&#39;</span>
<span class="co">#&gt; ● Finish the data preparation script in &#39;data-raw/dados.R&#39;</span>
<span class="co">#&gt; ● Use `usethis::use_data()` to add prepared data to package</span></code></pre>
<p>Como indicado pelos três últimos pontos da saída do comando, agora basta colocar
o código de tratamento da base <code>dados</code> em <code>data-raw/dados.R</code> e por fim utilizar
<code>usethis::use_data()</code> para adicionar os dados preparados ao pacote. Para
prosseguir o exemplo, o arquivo <code>dados.xlsx</code> foi copiado para o diretório
<code>data-raw</code> e o código abaixo foi inserido em <code>data-raw/dados.R</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr)

<span class="co"># Limpar a base dados.xlsx</span>
dados &lt;-<span class="st"> &quot;data-raw/dados.xlsx&quot;</span> <span class="op">%&gt;%</span>
<span class="st">  </span>readxl<span class="op">::</span><span class="kw">read_xlsx</span>() <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(cyl <span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(
    <span class="dt">brand =</span> stringr<span class="op">::</span><span class="kw">str_extract</span>(model, <span class="st">&quot;^[A-z]+&quot;</span>)
  ) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(brand) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarise</span>(
    <span class="dt">mean_mpg =</span> <span class="kw">mean</span>(mpg),
    <span class="dt">prop_6_cyl =</span> <span class="kw">sum</span>(cyl <span class="op">==</span><span class="st"> </span><span class="dv">6</span>)<span class="op">/</span>dplyr<span class="op">::</span><span class="kw">n</span>()
  ) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">arrange</span>(brand)

<span class="co"># Salvar a base para uso no pacote</span>
usethis<span class="op">::</span><span class="kw">use_data</span>(dados)
<span class="co">#&gt; ✔ Creating &#39;data/&#39;</span>
<span class="co">#&gt; ✔ Saving &#39;dados&#39; to &#39;data/dados.rda&#39;</span></code></pre>
<p>Neste caso o arquivo Excel foi criado de dentro do prṕrio R com o comando
<code>writexl::write_xlsx(tibble::rownames_to_column(mtcars, "model"), "data-raw/dados.xlsx")</code>,
mas isso é só um exemplo ilustrativo. O importante é saber o que acontece quando
a função <code>use_data()</code> é executada para um objeto do ambiente global, ou seja,
as duas últimas linhas do bloco de código acima.</p>
<p>Por trás das câmeras, <code>use_data()</code> está chamando a função <code>save()</code> do R para
gerar um arquivo RDA a partir de um objeto do ambiente global. Arquivos RDA são
extremamente estáveis, compactos e podem ser carregados rapidamente pelo R,
tornando este formato o principal meio de guardar dados de um pacote. Se os
dados do pacote forem guardados assim, eles ficarão disponíveis para serem
chamados pelo usuário (você mesmo durante a análise)! Para entender como ficam
os dados uma vez que eles são incluídos na pasta <code>data</code>, basta dar uma olhada
no objeto <code>dplyr::starwars</code>; neste caso, a base tratada e exportada se chama
<code>starwars</code>.</p>
<p>Para carregar os dados na sua sessão e poder utilizá-los na análise, basta
executar <code>pkgload::load_all()</code> ou pressionar a combinação <code>CTRL + SHIFT + L</code> no
RStudio. Independentemente do número de tabelas que estiverem salvas na pasta
<code>data</code>, todas serão carregadas instantaneamente.</p>
<p>A título de curiosidade, existem algumas situações em que as bases brutas são
grandes demais para serem sincronizadas com o GitHub. A plataforma tem um
(razoável) limite de 1GB por repositório que pode ser insuficiente para
armazenar dados brutos e tratados. Para não sincronizar as bases brutas com o
Git, basta adicioná-las ao arquivo <code>.gitignore</code> do pacote; no caso do exemplo
acima, bastaria adicionar a esse arquivo uma linha com o texto
<code>data-raw/dados.xlsx</code>.</p>
<div id="documentacao-1" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Documentação</h3>
<p>Além de funções, também é possível documentar bases de dados com o pacote
<code>roxygen2</code>. Para isso, crie um arquivo <code>data.R</code> na pasta <code>R/</code> do pacote e crie
um objeto entre aspas com o nome de cada base de dados exportada. Documentar
dados é extremamente útil quando o pacote vai ser compartilhado com múltiplas
pessoas da mesma organização, pois assim não é necessário compartilhar uma
planilha Excel separada descrevendo cada uma das colunas da tabela.</p>
<p>Uma boa documentação de bases de dados não precisa de muita coisa. Abaixo é
exemplificado como seria documentada <code>dados</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&#39; Dados sobre 15 marcas de carros</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; A tabela, gerada a partir de `mtcars`, apresenta algumas poucas</span>
<span class="co">#&#39; informações sobre carros com mais de 4 cilindros de 15 marcas</span>
<span class="co">#&#39; americanas de carros.</span>
<span class="co">#&#39;</span>
<span class="co">#&#39; @format Uma tabela com 3 colunas e 15 linhas:</span>
<span class="co">#&#39; \describe{</span>
<span class="co">#&#39;   \item{brand}{Marca}</span>
<span class="co">#&#39;   \item{mean_mpg}{Milhas por galão médias para aquela marca}</span>
<span class="co">#&#39;   \item{prop_6_cyl}{Proporção dos carros que apresentam 6 cilindros}</span>
<span class="co">#&#39; }</span>
<span class="co">#&#39; @source Henderson and Velleman (1981)</span>
<span class="st">&quot;dados&quot;</span></code></pre>

</div>
</div>
</div>














<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>Aqui o termo “programação funcional” é usado de forma figurativa. Na
computação linguagens denominadas “funcionais” tem um <em>modus operandi</em> bastante
específico não abordado neste capítulo.<a href="dados.html#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="versoes.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/curso-r/zen-do-r/edit/master/04_dados.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
